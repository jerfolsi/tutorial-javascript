<!DOCTYPE html>
<html>
<head>
  <script src="http://maps.googleapis.com/maps/api/js"></script>

  <script>
      var map;
      var myCenter = new google.maps.LatLng(51.508742,-0.120850);
      var listPoints = [];
      var polyline1 = new google.maps.Polyline({
        path:[],
        strokeColor:"#0000FF",
        strokeOpacity:0.8,
        strokeWeight:2
      });

      function initialize()
      {
          //--------------------------------------------------------
          //-- define the map property object
          //--------------------------------------------------------
          var mapProp = {
            center:myCenter,
            zoom:5,
            mapTypeId:google.maps.MapTypeId.ROADMAP
          };

          //--------------------------------------------------------
          //-- create the map object
          //--------------------------------------------------------
          map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

          //-- attach polyline to the map
          polyline1.setMap(map);

          //--------------------------------------------------------
          //-- add a click listener and launch the 'placeMarker' function
          //--------------------------------------------------------
          google.maps.event.addListener(map, 'click', function(event) {
            addPoint(event.latLng);
          });
      }


      //--------------------------------------------------------
      //-- funciton to add a point to the polyline
      //--------------------------------------------------------
      function addPoint(location)
      {
          //-- get the array of points (of the polyline1)
          var path = polyline1.getPath();

          //-- add a new point to the line
          path.push(location);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
  </script>
</head>

<body>

  <div id="googleMap" style="width:500px;height:380px;"></div>
  <div>Click at different points of the map to draw a polyline</div>

</body>
</html>
